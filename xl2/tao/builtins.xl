0! -> 1
N! -> N * (N-1)!

// If-then-else statement
if true then TrueBody else FalseBody    -> do TrueBody
if false then TrueBody else FalseBody   -> do FalseBody

if true then TrueBody                   -> do TrueBody
if false then TrueBody                  -> false

// Key management
key "Control-F"                         -> toggle_full_screen
key "Delete"                            -> delete_selection "Delete"
key "Backspace"                         -> delete_selection "Backspace"
key X                                   -> text_edit_key X

// 3D Shapes
sphere x:real, y:real, z:real, r:real   -> sphere x,y,z,2*r,2*r,2*r,25,25
sphere r:real                           ->
    sphere 0.0, 0.0, 0.0, 2*r, 2*r, 2*r, 25, 25

//2D Shapes
line x0:real, y0:real, x1:real, y1:real ->
    path
        move_to x0, y0, 0
        line_to x1, y1, 0

circle x:real, y:real, r:real           -> ellipse x, y, 2*r, 2*r
circle r:real                           -> ellipse 0.0, 0.0, 2*r, 2*r
oval t                                  -> ellipse t

circular_sector x:real, y:real, r:real, a:real, b:real ->
    ellipse_arc x, y, 2*r, 2*r, a, b
circular_sector r:real, a:real, b:real  -> ellipse_arc 0.0, 0.0, 2*r,2*r, a, b

rectangle w:real, h:real                -> rectangle 0.0, 0.0, w, h

square x:real, y:real, s:real           -> rectangle x, y, s, s
square s:real                           -> rectangle 0.0, 0.0, s, s

triangle w:real, h:real                 -> triangle 0.0, 0.0, w, h
right_triangle w:real, h:real           -> right_triangle 0.0, 0.0, w, h

rounded_rectangle w:real, h:real, r:real-> rounded_rectangle 0.0, 0.0, w, h, r

polygram x:real, y:real, w:real, h:real, p:integer, q:integer ->
    star_polygon x, y, w, h, p, q
polygon x:real, y:real, w:real, h:real, p:integer ->
    star_polygon x, y, w, h, p, 1

equilateral_triangle t                  -> polygon t, 3
tetragon t                              -> polygon t, 4
diamond t                               -> polygon t, 4
pentagon t                              -> polygon t, 5
hexagon t                               -> polygon t, 6
heptagon t                              -> polygon t, 7
octagon t                               -> polygon t, 8
nonagon t                               -> polygon t, 9
decagon t                               -> polygon t, 10
hendecagon t                            -> polygon t, 11
dodecagon t                             -> polygon t, 12
tridecagon t                            -> polygon t, 13
tetradecagon t                          -> polygon t, 14
pentadecagon t                          -> polygon t, 15
hexadecagon t                           -> polygon t, 16
heptadecagon t                          -> polygon t, 17
octadecagon t                           -> polygon t, 18
enneadecagon t                          -> polygon t, 19
icosagon t                              -> polygon t, 20

pentagram t                             -> polygram t, 5, 2
hexagram t                              -> polygram t, 6, 2
star_of_david t                         -> polygram t, 6, 2
heptagram t                             -> polygram t, 7, 2
star_of_lakshmi t                       -> polygram t, 8, 2
octagram t                              -> polygram t, 8, 3
nonagram t                              -> polygram t, 9, 3
decagram t                              -> polygram t, 10, 3

schläfli t, {p:integer}                 -> polygon t, p
schläfli t, {p:integer/q:integer}       -> polygram t, p, q

x..y / t -> x + (y-x) * (1 + sin(time/t * 2*pi)) / 2

selection_color ->
    color 0.7..1.0 / 5.0, 0.8..1.0 / 9.0, 0.9..1.0 / 6.0, 0.4
    line_color 0.8, 0.6, 0.3..0.7 / 3.0, 0.8

text_selection_color ->
    color 70%,90%,100%,50%
    line_color 1,0,0,0

text_highlight_color ->
    color 70%,70%,70%,50%
    line_color 1,0,0,0

text_cursor_color ->
    color 1..0/2, 0, 0..1/2, 90%
    line_color 1,0,0,0

text_cursor_highlight ->
    color 0.6, 0.6..1.0/2, 0.6, 40%
    line_color 1,0,0,0

handle_color ->
    color 0.0..0.4 / 3.0, 0.0, 0.0, 0.6
    line_color 0,0,0,0

draw_selection x,y,z,w,h,d ->
    selection_color
    cube x-w/2, y-h/2, z-d/2, w, h, d

draw_text_selection x,y,w,h ->
    if w > 1 then
        text_selection_color
        rectangle x, y, w, h
    else
        text_cursor_color
        rectangle x, y, w, h

draw_text_highlight x,y,w,h ->
    if w > 1 then
        text_highlight_color
        rectangle x, y, w, h
    else
        text_cursor_highlight
        rectangle x, y, w, h

draw_3D_selection x,y,z,w,h,d ->
    selection_color
    cube x, y, z, w, h, d

draw_widget_selection x,y,w,h ->
    selection_color
    color 0,0,0,0
    rectangle x, y, w, h

draw_selection x,y,w,h ->
    selection_color
    svg "bubbles.svg"
    rectangle x, y, w+4, h+4

draw_selection_rectangle x, y, w, h ->
    draw_selection x,y,w,h

draw_handle x, y, z ->
    handle_color
    cube x, y, z, 8,8,8

draw_rotation_base x, y, z ->
    selection_color
    locally
        rotatex 90
        sphere x, y, z, 50, 50, 50, 16, 8
draw_rotation_tip x, y, z -> draw_handle x, y, z

draw_translation_base x, y, z ->
    selection_color
    cube x, y, z, 50, 50, 50
draw_translation_x x, y, z -> draw_handle x + 40, y, z
draw_translation_y x, y, z -> draw_handle x, y + 40, z
draw_translation_z x, y, z -> draw_handle x, y, z + 40

draw_scale_base x, y, z ->
    selection_color
    cube x, y, z, 50, 20, 20
    cube x, y, z, 20, 50, 20
    cube x, y, z, 20, 20, 50
draw_scale_x x, y, z -> draw_handle x + 40, y, z
draw_scale_y x, y, z -> draw_handle x, y + 40, z
draw_scale_z x, y, z -> draw_handle x, y, z + 40

toolbar n:text                          -> toolbar n, ""

menu n:text                             -> menu n, "", ""
menu n:text, l:text                     -> menu n, l, ""

submenu n:text                          -> submenu n, "", ""
submenu n:text, l:text                  -> submenu n, l, ""

menu_item n:text, l:text, t             -> menu_item n, l, "", false, "false", t
menu_item n:text, l:text, i:text, t     -> menu_item n, l, i, false, "false", t
menu_item n:text, l:text, cb:boolean, ck:text, t-> menu_item n, l, "", cb, ck, t

push_button x:real, y:real, w:real, h:real, l:text, a:tree ->
      push_button x, y, w, h, l, l, a
radio_button x:real, y:real, w:real, h:real, l:text, m:text, a:tree ->
      radio_button x, y, w, h, l, l, m, a
check_box_button x:real, y:real, w:real, h:real, l:text, m:text, a:tree ->
      check_box_button  x, y, w, h, l, l, m, a

theme_colors ->
    texture ""
    color 0.6, 0.6, 0.6, 1
    line_color 0, 0, 0, 1

menu_insert -> {
menu      "menu:insert", "Insert"
submenu   "menu:insert > shape", "Shape"
menu_item "menu:insert > shape > line ---", "Line", insert
    line 50, -50, -50, 50
menu_item "menu:insert > shape > line -->", "Line with Arrowhead", insert
    line 50, -50, -50, 50
menu_item "menu:insert > shape > line <->", "Line with Two Arrowheads", insert
    line 50, -50, -50, 50
menu_item "menu:insert > shape > rectangle", "Rectangle", insert
    rectangle 0, 0, 100, 100
menu_item "menu:insert > shape > rounded rectangle", "Rounded Rectangle", insert
    rounded_rectangle 0, 0, 100, 100, 15
menu_item "menu:insert > shape > oval", "Oval", insert
    oval 0, 0, 100, 100
menu_item "menu:insert > shape > triangle", "Triangle", insert
    triangle 0, 0, 100, 100
menu_item "menu:insert > shape > right triangle", "Right Triangle", insert
    right_triangle 0, 0, 100, 100
menu_item "menu:insert > shape > arrow", "Arrow", insert
    arrow 0, 0, 100, 100, 44, 32%
menu_item "menu:insert > shape > double arrow", "Double Arrow", insert
    double_arrow 0, 0, 100, 100, 44, 32%
menu_item "menu:insert > shape > diamond", "Diamond", insert
    diamond 0, 0, 100, 100
menu_item "menu:insert > shape > speech ballon", "Speech Balloon", insert
    speech_balloon 0, 16, 100, 68, 50, -50, -50
menu_item "menu:insert > shape > callout", "Callout", insert
    callout 16, 0, 68, 100, 15, -50, 0, 60
menu_item "menu:insert > shape > star", "Star", insert
    star 0, 0, 100, 100, 5, 50%
menu_item "menu:insert > shape > polygon", "Polygon", insert
    polygon 0, 0, 100, 100, 5
}

toolbar_insert -> {
toolbar   "toolbar:insert", "Insert", "N"
submenu   "toolbar:insert > shape", "Shape", "images/tb_shapes.png"
menu_item "toolbar:insert > shape > line ---", "", "images/tb_shape_line.png", insert
    line 50, -50, -50, 50
menu_item "toolbar:insert > shape > line -->", "", "images/tb_shape_line_w_arrowhead.png", insert
    line 50, -50, -50, 50
menu_item "toolbar:insert > shape > line <->", "", "images/tb_shape_line_w_two_arrowheads.png", insert
    line 50, -50, -50, 50
menu_item "toolbar:insert > shape > rectangle", "", "images/tb_shape_rectangle.png", insert
    rectangle 0, 0, 100, 100
menu_item "toolbar:insert > shape > rounded rectangle", "", "images/tb_shape_rounded_rectangle.png", insert
    rounded_rectangle 0, 0, 100, 100, 15
menu_item "toolbar:insert > shape > oval", "", "images/tb_shape_oval.png", insert
    oval 0, 0, 100, 100
menu_item "toolbar:insert > shape > triangle", "", "images/tb_shape_triangle.png", insert
    triangle 0, 0, 100, 100
menu_item "toolbar:insert > shape > right triangle", "", "images/tb_shape_right_triangle.png", insert
    right_triangle 0, 0, 100, 100
menu_item "toolbar:insert > shape > arrow", "", "images/tb_shape_arrow.png", insert
    arrow 0, 0, 100, 100, 44, 32%
menu_item "toolbar:insert > shape > double arrow", "", "images/tb_shape_double_arrow.png", insert
    double_arrow 0, 0, 100, 100, 44, 32%
menu_item "toolbar:insert > shape > diamond", "", "images/tb_shape_diamond.png", insert
    diamond 0, 0, 100, 100
menu_item "toolbar:insert > shape > speech ballon", "", "images/tb_shape_speech_balloon.png", insert
    speech_balloon 0, 16, 100, 68, 50, -50, -50
menu_item "toolbar:insert > shape > callout", "", "images/tb_shape_callout.png", insert
    callout 16, 0, 68, 100, 15, -50, 0, 60
menu_item "toolbar:insert > shape > star", "", "images/tb_shape_star.png", insert
    star 0, 0, 100, 100, 5, 50%
menu_item "toolbar:insert > shape > polygon", "", "images/tb_shape_polygon.png", insert
    polygon 0, 0, 100, 100, 5
}
